@page "/Prepods/Create"
@using BlazorApp2.Models
@inject BlazorApp2Context _context
@using Microsoft.EntityFrameworkCore
@inject NavigationManager NavigationManager

<h1 class="t">Внести Преподавателя</h1>
<br />
<EditForm Model="newPrepod" OnValidSubmit="HandleValidSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />
    <div class="row">
        <div class="col-md-4">
            <div class="form-group">
                <label for="surname" class="control-label">Фамилия</label>
                <InputText id="surname" @bind-Value="newPrepod.Фамилия" />
            </div>
            <div class="form-group">
                <label for="name" class="control-label">Имя</label>
                <InputText id="name" @bind-Value="newPrepod.Имя" />
            </div>
            <div class="form-group">
                <label for="patronymic" class="control-label">Отчество</label>
                <InputText id="patronymic" @bind-Value="newPrepod.Отчество" />
            </div>
            <div class="form-group">
                <label for="curator" class="control-label">Куратор Группы</label>
                <InputText id="curator" @bind-Value="newPrepod.Куратор_Группы" />
            </div>
            <div class="form-group">
                <label for="profession" class="control-label">Профессия</label>
                <InputText id="profession" @bind-Value="newPrepod.Профессия" />
            </div>
            <div class="form-group">
                <label for="birthday" class="control-label">День Рождения</label>
                <InputDate id="birthday" @bind-Value="newPrepod.День_Рождения" />
            </div>
            <div class="form-group">
                <label for="roomNumber" class="control-label">Номер Кабинета</label>
                <InputNumber id="roomNumber" @bind-Value="newPrepod.Номер_Кабинета" />
            </div>
            <div class="form-group">
                <label for="salary" class="control-label">Зарплата</label>
                <InputNumber id="salary" @bind-Value="newPrepod.Зарплата" />
            </div>
            <div class="form-group">
                <label for="experience" class="control-label">Стаж</label>
                <InputNumber id="experience" @bind-Value="newPrepod.Стаж" />
            </div>
            <div class="form-group">
                <br />
                <button type="submit">Добавить преподавателя</button>
            </div>
            <br />
            <div class="form-group">
                <NavLink class="nav-link" href="/Prepods/Index">
                    <span class="oi oi-minus" aria-hidden="true"></span> Вернуться к Просмотру
                </NavLink>
            </div>
        </div>
    </div>
</EditForm>
@code {
    private Prepod newPrepod = new Prepod();

    private async Task HandleValidSubmit()
    {
        _context.Prepod.Add(newPrepod);
        _context.EnsureData2();
        await _context.SaveChangesAsync();

        NavigationManager.NavigateTo("/Prepods/Index");
    }
}